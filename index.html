<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Stock Research Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-50">
  <div id="root"></div>

  <script>
    const e = React.createElement;
    const { useState, useEffect } = React;

    const sp500Stocks = [
      { symbol: 'AAPL', name: 'Apple Inc.' },
      { symbol: 'MSFT', name: 'Microsoft Corporation' },
      { symbol: 'GOOGL', name: 'Alphabet Inc.' },
      { symbol: 'AMZN', name: 'Amazon.com Inc.' },
      { symbol: 'NVDA', name: 'NVIDIA Corporation' },
      { symbol: 'TSLA', name: 'Tesla Inc.' },
      { symbol: 'META', name: 'Meta Platforms Inc.' },
      { symbol: 'JPM', name: 'JPMorgan Chase' },
      { symbol: 'V', name: 'Visa Inc.' },
      { symbol: 'WMT', name: 'Walmart Inc.' },
      { symbol: 'SPY', name: 'S&P 500 ETF' },
      { symbol: 'QQQ', name: 'Nasdaq-100 ETF' }
    ];

    const basePrices = {
      AAPL: 230, MSFT: 425, GOOGL: 175, AMZN: 205, NVDA: 140,
      TSLA: 350, META: 580, JPM: 220, V: 300, WMT: 85,
      SPY: 580, QQQ: 505
    };

    function Icon({ name, className = '' }) {
      return e('i', { 'data-lucide': name, className });
    }

    function generateDemoData(symbol) {
      const stock = sp500Stocks.find(s => s.symbol === symbol);
      if (!stock) return null;

      const base = basePrices[symbol] || 100;
      const changePct = (Math.random() - 0.5) * 0.06;
      const price = base * (1 + changePct);

      return {
        symbol,
        name: stock.name,
        price: price.toFixed(2),
        change: (price - base).toFixed(2),
        changePercent: (changePct * 100).toFixed(2),
        marketCap: ((price * 15e9) / 1e9).toFixed(2) + 'B',
        pe: (15 + Math.random() * 30).toFixed(1),
        roe: (15 + Math.random() * 35).toFixed(1) + '%',
        revenueGrowth: (5 + Math.random() * 25).toFixed(1) + '%',
        earningsGrowth: (8 + Math.random() * 30).toFixed(1) + '%',
        profitMargin: (10 + Math.random() * 30).toFixed(1) + '%',
        dividendYield: Math.random() > 0.4 ? (Math.random() * 4).toFixed(2) + '%' : 'N/A',
        sentiment: Math.random() > 0.4 ? 'Bullish' : Math.random() > 0.5 ? 'Neutral' : 'Bearish',
        score: Math.floor(55 + Math.random() * 35),
        week52Low: (price * 0.75).toFixed(2),
        week52High: (price * 1.25).toFixed(2)
      };
    }

    function App() {
      const [symbol, setSymbol] = useState('');
      const [stockData, setStockData] = useState(null);
      const [loading, setLoading] = useState(false);
      const [activeTab, setActiveTab] = useState('overview');

      useEffect(() => lucide.createIcons());

      function analyze() {
        if (!symbol) return;
        setLoading(true);
        setTimeout(() => {
          setStockData(generateDemoData(symbol.toUpperCase()));
          setLoading(false);
        }, 600);
      }

      return e('div', { className: 'min-h-screen' },

        e('div', { className: 'max-w-6xl mx-auto p-6' },

          e('h1', { className: 'text-3xl font-bold mb-6 flex items-center gap-2' },
            e(Icon, { name: 'bar-chart-2', className: 'w-8 h-8' }),
            'AI Stock Research Platform'
          ),

          e('div', { className: 'flex gap-2 mb-6' },
            e('input', {
              id: 'stock',
              name: 'stock',
              value: symbol,
              onChange: ev => setSymbol(ev.target.value),
              placeholder: 'Enter stock symbol (AAPL)',
              className: 'flex-1 border rounded px-4 py-3'
            }),
            e('button', {
              onClick: analyze,
              className: 'bg-blue-600 text-white px-6 rounded font-semibold flex items-center gap-2'
            },
              e(Icon, { name: 'search', className: 'w-5 h-5' }),
              'Analyze'
            )
          ),

          loading && e('p', { className: 'text-gray-500' }, 'Analyzing…'),

          stockData && !loading && e('div', null,

            e('div', { className: 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg p-6 mb-6' },
              e('div', { className: 'flex justify-between items-center' },
                e('div', null,
                  e('div', { className: 'text-4xl font-bold' }, stockData.symbol),
                  e('div', { className: 'text-blue-100' }, stockData.name)
                ),
                e('div', { className: 'text-right' },
                  e('div', { className: 'text-3xl font-bold' }, '$' + stockData.price),
                  e('div', {
                    className: stockData.change >= 0 ? 'text-green-300' : 'text-red-300'
                  },
                    (stockData.change >= 0 ? '+' : '') + stockData.change +
                    ' (' + stockData.changePercent + '%)'
                  )
                )
              )
            ),

            e('div', { className: 'bg-white rounded-lg shadow' },

              e('div', { className: 'flex border-b' },
                ['overview', 'fundamental', 'news'].map(tab =>
                  e('button', {
                    key: tab,
                    onClick: () => setActiveTab(tab),
                    className:
                      'px-6 py-4 font-semibold ' +
                      (activeTab === tab ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600')
                  }, tab.charAt(0).toUpperCase() + tab.slice(1))
                )
              ),

              e('div', { className: 'p-6' },

                activeTab === 'overview' && e('div', { className: 'grid md:grid-cols-4 gap-4' },
                  ['marketCap', 'pe', 'roe', 'sentiment'].map(key =>
                    e('div', { key, className: 'bg-gray-50 rounded p-4' },
                      e('div', { className: 'text-sm text-gray-600' }, key),
                      e('div', { className: 'text-xl font-bold' }, stockData[key])
                    )
                  )
                ),

                activeTab === 'fundamental' && e('div', { className: 'space-y-3' },
                  e('div', null, 'Revenue Growth: ', stockData.revenueGrowth),
                  e('div', null, 'Earnings Growth: ', stockData.earningsGrowth),
                  e('div', null, 'Profit Margin: ', stockData.profitMargin)
                ),

                activeTab === 'news' && e('div', { className: 'space-y-2' },
                  e('div', null, stockData.symbol, ' beats earnings expectations'),
                  e('div', null, 'Analysts upgrade outlook'),
                  e('div', null, 'Market sentiment remains ', stockData.sentiment)
                )

              )
            )
          )
        ),

        e('footer', { className: 'bg-gray-900 text-white py-6 mt-12' },
          e('div', { className: 'text-center text-sm text-gray-400' },
            '© 2026 AI Stock Research Platform • Educational use only'
          )
        )
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(e(App));
  </script>
</body>
</html>
