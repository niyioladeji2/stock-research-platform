<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Stock Research Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN (allowed on GitHub Pages, warning is informational only) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React (NO Babel, NO JSX) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Lucide SVG Icons (SAFE) -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-50">
  <div id="root"></div>

  <script>
    const e = React.createElement;

    function Icon({ name, className }) {
      return e("i", {
        "data-lucide": name,
        className
      });
    }

    function App() {
      const [symbol, setSymbol] = React.useState("AAPL");
      const [price, setPrice] = React.useState(null);
      const [loading, setLoading] = React.useState(false);

      React.useEffect(() => {
        lucide.createIcons();
      });

      async function analyze() {
        setLoading(true);
        try {
          const res = await fetch(
            "https://api.allorigins.win/raw?url=" +
              encodeURIComponent(
                `https://query1.finance.yahoo.com/v8/finance/chart/${symbol}`
              )
          );
          const json = await res.json();
          const p =
            json.chart.result[0].meta.regularMarketPrice;
          setPrice(p.toFixed(2));
        } catch {
          setPrice("N/A");
        }
        setLoading(false);
      }

      return e(
        "div",
        { className: "max-w-3xl mx-auto p-6" },

        e("h1", { className: "text-3xl font-bold mb-6 flex items-center gap-2" },
          e(Icon, { name: "bar-chart-2", className: "w-8 h-8" }),
          "AI Stock Research Platform"
        ),

        e("label", {
          htmlFor: "stock-input",
          className: "block text-sm font-medium mb-1"
        }, "Stock symbol"),

        e("div", { className: "flex gap-2 mb-4" },
          e("input", {
            id: "stock-input",
            name: "stock",
            value: symbol,
            onChange: ev => setSymbol(ev.target.value.toUpperCase()),
            className:
              "flex-1 border rounded px-3 py-2",
            placeholder: "AAPL"
          }),
          e("button", {
            onClick: analyze,
            className:
              "bg-blue-600 text-white px-4 py-2 rounded flex items-center gap-2"
          },
            e(Icon, { name: "search", className: "w-4 h-4" }),
            "Analyze"
          )
        ),

        loading &&
          e("p", { className: "text-gray-500" }, "Loadingâ€¦"),

        price &&
          e("div", {
            className:
              "mt-6 bg-white p-6 rounded shadow"
          },
            e("div", { className: "text-sm text-gray-500" }, "Current Price"),
            e("div", { className: "text-4xl font-bold" }, `$${price}`)
          )
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(
      e(App)
    );
  </script>
</body>
</html>
