<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Stock Research Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Lucide UMD -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-50">
  <div id="root"></div>

  <script>
    const e = React.createElement;
    const { useState, useEffect, useRef } = React;

    function Icon({ name, className }) {
      return e("i", { "data-lucide": name, className });
    }

    function generateNewsHeadlines(symbol, sentiment) {
      return [
        {
          headline: symbol + " shows strong institutional interest",
          source: "MarketWatch",
          time: "2h ago",
          sentiment: sentiment === "Bullish" ? "Positive" : "Neutral"
        },
        {
          headline: "Analysts reassess outlook for " + symbol,
          source: "Bloomberg",
          time: "5h ago",
          sentiment: "Neutral"
        },
        {
          headline: symbol + " volatility attracts options traders",
          source: "Reuters",
          time: "1d ago",
          sentiment: sentiment === "Bearish" ? "Negative" : "Neutral"
        }
      ];
    }

    function generateDemoData(symbol) {
      const base = 100 + Math.random() * 400;
      return {
        symbol,
        price: base.toFixed(2),
        sma50: (base * 0.97).toFixed(2),
        sma200: (base * 0.92).toFixed(2),
        rsi: Math.floor(30 + Math.random() * 40),
        macd: Math.random() > 0.5 ? "Bullish" : "Bearish",
        trend: Math.random() > 0.5 ? "Uptrend" : "Downtrend",
        support: (base * 0.9).toFixed(2),
        sentiment: Math.random() > 0.5 ? "Bullish" : "Neutral",
        sentimentScore: Math.floor(55 + Math.random() * 35)
      };
    }

    function StockResearchPlatform() {
      const [symbol, setSymbol] = useState("");
      const [stockData, setStockData] = useState(null);
      const [activeTab, setActiveTab] = useState("technical");
      const chartRef = useRef(null);

      useEffect(() => {
        lucide.createIcons();
      });

      useEffect(() => {
        if (activeTab === "technical" && stockData) {
          const ctx = document.getElementById("priceChart");
          if (!ctx) return;

          if (chartRef.current) {
            chartRef.current.destroy();
          }

          chartRef.current = new Chart(ctx, {
            type: "line",
            data: {
              labels: Array.from({ length: 6 }, (_, i) => `M-${6 - i}`),
              datasets: [
                {
                  label: "Price",
                  data: Array.from({ length: 6 }, () => Math.random() * 100 + 100),
                  borderWidth: 2
                },
                {
                  label: "SMA 50",
                  data: Array.from({ length: 6 }, () => Math.random() * 90 + 95),
                  borderWidth: 2
                }
              ]
            },
            options: {
              responsive: true,
              plugins: { legend: { display: false } }
            }
          });
        }
      }, [activeTab, stockData]);

      function analyze() {
        if (!symbol) return;
        setStockData(generateDemoData(symbol.toUpperCase()));
      }

      return e("div", { className: "min-h-screen" },

        e("div", { className: "max-w-7xl mx-auto p-6" },

          e("h1", { className: "text-3xl font-bold mb-6 flex items-center gap-2" },
            e(Icon, { name: "bar-chart-2", className: "w-8 h-8" }),
            "AI Stock Research Platform"
          ),

          e("div", { className: "flex gap-2 mb-6" },
            e("input", {
              id: "symbol",
              name: "symbol",
              className: "flex-1 border rounded px-4 py-3",
              placeholder: "Enter stock symbol",
              value: symbol,
              onChange: ev => setSymbol(ev.target.value)
            }),
            e("button", {
              className: "bg-blue-600 text-white px-6 rounded font-semibold",
              onClick: analyze
            }, "Analyze")
          ),

          stockData && e("div", { className: "bg-white rounded-lg shadow p-6" },

            e("div", { className: "flex border-b mb-6" },
              ["technical", "options", "news"].map(tab =>
                e("button", {
                  key: tab,
                  onClick: () => setActiveTab(tab),
                  className:
                    "px-6 py-3 font-semibold " +
                    (activeTab === tab
                      ? "border-b-2 border-blue-600 text-blue-600"
                      : "text-gray-600")
                }, tab.toUpperCase())
              )
            ),

            activeTab === "technical" && e("div", null,
              e("h3", { className: "text-xl font-bold mb-4" }, "Technical Analysis"),
              e("canvas", { id: "priceChart", height: 300 })
            ),

            activeTab === "options" && e("div", { className: "space-y-6" },
              e("h3", { className: "text-xl font-bold" }, "Options Strategies"),
              e("div", { className: "bg-green-50 p-6 rounded-lg" },
                e("div", { className: "flex items-center gap-2 mb-2" },
                  e(Icon, { name: "trending-up", className: "w-5 h-5" }),
                  e("strong", null, "Call Strategy")
                ),
                "60-day ATM calls with bullish momentum"
              )
            ),

            activeTab === "news" && e("div", { className: "space-y-4" },
              generateNewsHeadlines(stockData.symbol, stockData.sentiment).map((n, i) =>
                e("div", { key: i, className: "bg-gray-50 p-4 rounded" },
                  e("strong", null, n.headline),
                  e("div", { className: "text-sm text-gray-600" },
                    n.source, " • ", n.time
                  )
                )
              )
            )
          )
        ),

        e("footer", { className: "bg-gray-900 text-white py-6 mt-12 text-center text-sm text-gray-400" },
          "© 2026 AI Stock Research Platform • Educational use only"
        )
      );
    }

    ReactDOM.createRoot(document.getElementById("root"))
      .render(e(StockResearchPlatform));
  </script>
</body>
</html>
